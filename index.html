<!DOCTYPE html>
<html>
<head>
    <title>Tablero de Análisis</title>
    <link rel="stylesheet" href="css/chessboard-1.0.0.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
    <script src="js/chessboard-1.0.0.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
        body {overscroll-behavior: contain;} <!-- deshabilita el refresh en Android --> 
    </style>
</head>
<body>    
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <h2 style="text-align:center;">Tablero de Análisis</h2>
                <div id="tablero" style="width: 60%; margin: auto;"></div>
            </div>
            <div class="col-md-4">
                <h2>Posición</h2>
                <input type="button" id="clearBtn" value="Tablero Vacío"/>
                <input type="button" id="startBtn" value="Posición Estándar"/>
                <input type="button" id="quiz1Btn" value="Desafió #1"/>
                <input type="button" id="quiz2Btn" value="Desafió #2"/>
                <h2>Notación</h2>
                <div id="notacion"</div>
            </div>
        </div>
    </div>    
 
    <script type="text/javascript">
        var jugada = 0;
        function onDrop (source, target, piece, newPos, oldPos, orientation) {
            jugada++;
            const movimiento = document.createTextNode(jugada + '. ' + piece + ' ' +  (source === 'spare' ? '-' : source) + ' ' + target); 
            const parrafo = document.createElement("p");
            parrafo.appendChild(movimiento);
            document.getElementById("notacion").appendChild(parrafo); 
        }
        var board = Chessboard('tablero', {
                draggable: true,
                dropOffBoard: 'trash',
                sparePieces: true,
                showNotation: true,
                onDrop: onDrop});
        $(window).resize(board.resize);
        $('#startBtn').on('click', board.start);
        $('#clearBtn').on('click', board.clear);
        $('#quiz1Btn').on('click', function () { board.position({a1: 'wK', e4: 'wQ'}) });
        $('#quiz1Btn').on('click', function () { board.position('8/8/8/8/ppp5/nnbp4/rbnp4/krnp4') });
    </script>
</body>
</html>
